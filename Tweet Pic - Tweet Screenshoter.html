<!DOCTYPE html>
<!-- saved from url=(0035)https://tweetpic.taila9d411.ts.net/ -->
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<link rel="icon" href="https://abs.twimg.com/responsive-web/client-web/icon-default.522d363a.png">
		<link rel="preconnect" href="https://fonts.googleapis.com/">
		<link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
		<link rel="preconnect" href="https://fonts.googleapis.com/css2?family=VT323&amp;display=swap">
		<meta content="width=device-width,initial-scale=1" name="viewport">
		<title>Tweet Pic - Tweet Screenshoter</title>
		<style>
			body {
				font-family: VT323, monospace;
				font-weight: 400;
				font-style: normal
			}

			.container {
				background-color: #fff;
				border: 0 solid #000;
				padding: 20px;
				width: 355px;
				text-align: center;
				position: relative
			}

			input {
				width: calc(100% - 54px);
				padding: 10px;
				font-size: 25px;
				margin-bottom: 10px;
				border: 2px solid #000;
				background-color: #ffdead;
				font-family: VT323, monospace;
				font-weight: 400;
				font-style: normal;
				color: #333;
				border-radius: 0;
				transition: box-shadow .3s
			}

			input:hover {
				box-shadow: 4px 4px 0 #aaa
			}

			button {
				font-size: 25px;
				background-color: tomato;
				color: #fff;
				border: 0 solid #000;
				cursor: pointer;
				font-family: VT323, monospace;
				box-shadow: 4px 4px 0 #aaa
			}

			h1 {
				font-size: 30px
			}

			p {
				font-size: 25px
			}

			button:hover {
				background-color: #ee5a24
			}

			.result {
				margin-top: 20px;
				padding: 10px;
				background-color: #98fb98;
				border: 2px solid #000;
				transition: box-shadow .3s;
				display: none;
				top: calc(100% + 20px);
				box-shadow: 4px 4px 0 #aaa;
				word-wrap: break-word
			}

			.result:hover {
				box-shadow: 4px 4px 0 #555
			}

			.instructions {
				text-align: left;
				margin-top: 20px
			}

			.status {
				margin-top: 10px
			}

			.online {
				color: green
			}

			.offline {
				color: red
			}

			#loading {
				position: absolute;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				font-size: 24px;
				font-weight: 700;
				color: #fff;
				background-color: rgba(0, 0, 0, .5);
				padding: 10px 20px;
				border-radius: 5px;
				display: none
			}

			img {
				display: block
			}
		</style>
	</head>
	<body>
		<center>
			<div class="container">
				<h1>TWEET-PIC</h1>
				<input id="urlInput" placeholder="https://x.com/aryarkusuma/status/1804386993826050072">
				<button id="fetchButton">Screenshot Tweet</button>
				<div class="instructions">
					<p>Instructions:</p>
					<ol>
						<li>
							<p>Put the X/Tweet status URL inside the input box</p>
						</li>
						<li>
							<p>Click the "Screenshot Tweet" button.</p>
						</li>
					</ol>
				</div>
				<div class="status" id="status">Checking status...</div>
				<div class="result" id="result"></div>
			</div>
			<p id="statusMessage"></p>
			<img id="tweetPicImage" src="https://tweetpic.taila9d411.ts.net/" style="display:none">
		</center>
		
<script>
const apiHealth = '/health-check';
    async function checkOnlineStatus() {
        try {
            const response = await fetch(apiHealth);
            const statusDiv = document.getElementById('status');
            const ok = await response.status
            if (ok === 200) {
                statusDiv.innerText = 'Status: Online';
                statusDiv.className = 'status online';
            } else {
                statusDiv.innerText = 'Status: Offline';
                statusDiv.className = 'status offline';
            }
        } catch (error) {
            const statusDiv = document.getElementById('status');
            statusDiv.innerText = 'Status: Offline';
            statusDiv.className = 'status offline';
        }
    }
    
    function getStatusId(url) {
        const regex = /status\/(\d+)/;
        const match = url.match(regex);
        if (match && match[1]) {
            return match[1];
        } else {
            return null;
        }
    }
    
    function extractTweetId() {
        const url = document.getElementById('urlInput').value;
        const statusId = getStatusId(url);
        const resultDiv = document.getElementById('result');
        if (statusId) {
            return statusId;
        } else {
            resultDiv.innerText = 'Invalid URL or Status ID not found.';
            resultDiv.style.display = 'block';
            return error;
        }
    }
    
    function changeImage() {
        var imgElement = document.getElementById('myImage');
        var loadingElement = document.getElementById('loading');
        // Show the loading indicator 
        loadingElement.style.display = 'block';
        // Set the src attribute to the URL of your image to start loading 
        imgElement.src = '' ;
      // Optionally set other attributes // Show the image element (it will remain hidden until loaded) 
        imgElement.style.display = 'block';
    }
    
    function wait(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }
    const apiTweetPic = '/tweetpic?id=';
    // Function to fetch and display the TweetPic URL 
    async function fetchTweetPicUrl() {
        try {
            document.getElementById('fetchButton').style.pointerEvents = 'none';
            document.getElementById('result').style.display = 'none';
            document.getElementById('tweetPicImage').style.display = 'none';
            document.getElementById('tweetPicImage').style.src = '';
            document.getElementById('statusMessage').textContent = 'Loading..';
            document.getElementById('statusMessage').style.display = 'block'; 
          // Fetch data from the API 
            const tweetId = extractTweetId() ;
            const response = await fetch(apiTweetPic + tweetId);
            // Check if the response status is not OK (200) // 
            if (!response.ok) { // 
                throw new Error(`HTTP error! Status: ${response.status}`); //
            }
            const data = await response.json();
            // Check for error in the response data 
            if (data.Error) {
                document.getElementById('fetchButton').style.pointerEvents = 'auto';
                document.getElementById('statusMessage').style.display = 'none';
                document.getElementById('result').style.display = 'block';
                document.getElementById('result').textContent = data.Error;
                document.getElementById('tweetPicImage').style.display = 'auto';
            } else { // Extract the TweetPicUrl value 
                const tweetPicUrl = data.TweetPicUrl; // Set the TweetPicUrl as the src of the image element 
                document.getElementById('statusMessage').style.display = 'block';
                await wait(5000);
                const tweetPicImage = document.getElementById('tweetPicImage');
                tweetPicImage.src = tweetPicUrl;
                tweetPicImage.style.display = 'block';
                document.getElementById('statusMessage').style.display = 'none';
                document.getElementById('fetchButton').style.pointerEvents = 'auto';
            }
        } catch (error) {
            document.getElementById('statusMessage').style.display = 'none';
            console.error('Error fetching the TweetPic URL:', error);
            document.getElementById('tweetPicImage').style.display = 'none';
            document.getElementById('fetchButton').style.pointerEvents = 'auto';
        }
    }
    // Add event listener to the button 
    document.getElementById('fetchButton').addEventListener('click', fetchTweetPicUrl);
    // Check the online status every 20 seconds 
    setInterval(checkOnlineStatus, 20000);
    
    // Initial check when the page loads 
    window.onload = checkOnlineStatus;
</script>
	</body>
</html>